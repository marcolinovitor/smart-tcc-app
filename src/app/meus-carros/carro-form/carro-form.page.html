<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-back-button></ion-back-button>
        </ion-buttons>
        <ion-title>Novo veículo</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content padding>
    <form autocomplete="off" [formGroup]="veiculosForm">
        <ion-row>
            <ion-col>
                <ion-item>
                    <ion-label>Tipo</ion-label>
                    <ion-select formControlName="tipo" (ionChange)="getVeiculos($event.target.value)" ok-text="Ok" cancel-text="Cancelar">
                        <ion-select-option value="carros">Carro</ion-select-option>
                        <ion-select-option value="motos">Moto</ion-select-option>
                        <ion-select-option value="caminhoes">Caminhão</ion-select-option>
                    </ion-select>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col>
                <ion-item>
                    <ion-label>Marca</ion-label>
                    <ion-select (ionChange)="getVeiculosPorMarca($event.target.value)" formControlName="marca"
                        ok-text="Ok" cancel-text="Cancelar">
                        <ion-select-option *ngFor="let v of marcasVeiculos" [value]="v.codigo">
                            {{ v.nome }}
                        </ion-select-option>
                    </ion-select>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col>
                <ion-item>
                    <ion-label>Modelo</ion-label>
                    <ion-select formControlName="modelo" ok-text="Ok" cancel-text="Cancelar">
                        <ion-select-option *ngFor="let v of nomesVeiculos" [value]="v.codigo">
                            {{ v.nome }}
                        </ion-select-option>
                    </ion-select>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col>
                <ion-item>
                    <ion-label position="floating">Placa</ion-label>
                    <ion-input formControlName="placa"></ion-input>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col>
                <ion-progress-bar *ngIf="saving" type="indeterminate"></ion-progress-bar>
                <ion-button (click)="salvarVeiculo(veiculosForm)" *ngIf="!saving" [disabled]="veiculosForm.invalid" expand="block">Cadastrar</ion-button>
            </ion-col>
        </ion-row>
    </form>
</ion-content>